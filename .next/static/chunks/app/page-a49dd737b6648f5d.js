(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2978:(e,t,r)=>{"use strict";r.d(t,{db:()=>n,j:()=>d});var l=r(2078),a=r(9708),s=r(1328);let o=(0,l.Dk)().length?(0,l.Sx)():(0,l.Wp)({apiKey:"AIzaSyBtsOBlh52YZagsLXp9_dcCq4qhkHBSWnU",authDomain:"thepub-sigma.firebaseapp.com",projectId:"thepub-sigma"}),n=(0,a.aU)(o),d=(0,s.xI)(o)},6982:(e,t,r)=>{Promise.resolve().then(r.bind(r,7322))},7322:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var l=r(5155),a=r(2115),s=r(2619),o=r.n(s),n=r(2978),d=r(1328),u=r(9708);let c=()=>{let[e,t]=(0,a.useState)(!1),[r,s]=(0,a.useState)(""),[c,i]=(0,a.useState)(""),[m,b]=(0,a.useState)(null),x=(0,a.useRef)(null),h=(0,a.useRef)(null),p=(0,a.useRef)(null),g=(0,a.useRef)(null),f=(0,a.useRef)(null);(0,a.useEffect)(()=>(document.body.style.backgroundImage="url('https://awolvision.com/cdn/shop/articles/sports_bar_awolvision.jpg?v=1713302733&width=1500')",document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center",document.body.style.backgroundAttachment="fixed",document.body.style.backgroundColor="#451a03",document.body.classList.add("font-montserrat"),()=>{document.body.style.backgroundImage="",document.body.style.backgroundSize="",document.body.style.backgroundPosition="",document.body.style.backgroundAttachment="",document.body.style.backgroundColor="",document.body.classList.remove("font-montserrat")}),[]),(0,a.useEffect)(()=>(0,d.hg)(n.j,async e=>{if(b(e),e){var t,r,l;w.current&&(w.current.textContent="My Profile");let a=(0,u.H9)(n.db,"users",e.uid),s=await (0,u.x7)(a);if(!s.exists()||!(null==(t=s.data())?void 0:t.username)){let t="";for(;(!t||t.length<2)&&null!==(t=null!=(r=window.prompt("Create a username for your account:"))?r:""););t&&await (0,u.BN)(a,{username:t,avatar:e.photoURL||"",email:e.email,provider:(null==(l=e.providerData[0])?void 0:l.providerId)||"google"},{merge:!0})}}else w.current&&(w.current.textContent="Sign Up/Login")}),[]);let w=(0,a.useRef)(null),y=()=>t(!1);(0,a.useEffect)(()=>{let t=t=>{let r=document.getElementById("signupModal");e&&r&&t.target===r&&y()};return window.addEventListener("mousedown",t),()=>window.removeEventListener("mousedown",t)},[e]);let v=async e=>{var t,r,l;e.preventDefault(),s(""),i("mt-4 text-center");let a=(null==(t=x.current)?void 0:t.value)||"",o=(null==(r=h.current)?void 0:r.value)||"",c=(null==(l=p.current)?void 0:l.value.trim())||"";if(!c||c.length<2){s("Username must be at least 2 characters."),i("mt-4 text-center text-red-600");return}try{let e=await (0,d.eJ)(n.j,a,o);await (0,u.BN)((0,u.H9)(n.db,"users",e.user.uid),{username:c,email:a,avatar:"",provider:"password"},{merge:!0}),s("Account created successfully!"),i("mt-4 text-center text-green-600"),x.current&&(x.current.value=""),h.current&&(h.current.value=""),p.current&&(p.current.value=""),setTimeout(()=>y(),1e3)}catch(e){s(e.message),i("mt-4 text-center text-red-600")}},j=async e=>{var t,r;e.preventDefault(),s(""),i("mt-4 text-center");let l=(null==(t=g.current)?void 0:t.value)||"",a=(null==(r=f.current)?void 0:r.value)||"";try{await (0,d.x9)(n.j,l,a),s("Logged in successfully!"),i("mt-4 text-center text-green-600"),g.current&&(g.current.value=""),f.current&&(f.current.value=""),setTimeout(()=>y(),1e3)}catch(e){s(e.message),i("mt-4 text-center text-red-600")}},N=async()=>{try{var e,t;let r=new d.HF,l=(await (0,d.df)(n.j,r)).user,a=(0,u.H9)(n.db,"users",l.uid),s=await (0,u.x7)(a);if(!s.exists()||!(null==(e=s.data())?void 0:e.username)){let e="";for(;(!e||e.length<2)&&(e=null!=(t=window.prompt("Create a username for your account:"))?t:"",null!==e););e&&await (0,u.BN)(a,{username:e,avatar:l.photoURL||"",email:l.email,provider:"google"},{merge:!0})}y()}catch(e){s(e.message),i("mt-4 text-center text-red-600")}};return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen font-montserrat pb-16",children:[(0,l.jsxs)("div",{className:"w-full max-w-md text-center bg-amber-800/90 border-2 border-yellow-600 rounded-lg p-6 shadow-lg relative pt-14",children:[(0,l.jsx)("button",{id:"userBtn",ref:w,className:"absolute top-4 right-4 bg-yellow-300 text-amber-900 font-bold px-4 py-2 rounded hover:bg-yellow-400 shadow transition",onClick:()=>{m?window.location.href="/myprofile":(t(!0),s(""),i("mt-4 text-center"),x.current&&(x.current.value=""),h.current&&(h.current.value=""),p.current&&(p.current.value=""),g.current&&(g.current.value=""),f.current&&(f.current.value=""))},children:"Sign Up/Login"}),(0,l.jsx)("h1",{className:"text-4xl font-bold text-yellow-300 mb-2",children:"Welcome to the Pub"}),(0,l.jsx)("p",{className:"text-sm text-yellow-300 mb-8",children:"Your ultimate sports bar and media experience. Grab a seat."}),(0,l.jsxs)(o(),{href:"/games-room",className:"block w-full bg-amber-600 text-white font-bold p-4 rounded-lg hover:bg-amber-700 transform hover:scale-105 transition duration-200 border-2 border-yellow-600 shadow-md mt-2 flex flex-col space-y-1",children:[(0,l.jsx)("span",{className:"text-3xl",children:"Games"}),(0,l.jsx)("p",{className:"text-sm text-white",children:"Prove that you know ball."})]}),(0,l.jsxs)(o(),{href:"/news",className:"block w-full bg-amber-600 text-white font-bold p-4 rounded-lg hover:bg-amber-700 transform hover:scale-105 transition duration-200 border-2 border-yellow-600 shadow-md mt-2 flex flex-col space-y-1",children:[(0,l.jsx)("span",{className:"text-3xl",children:"News"}),(0,l.jsx)("p",{className:"text-sm text-white",children:"Pick up The Pub Times for the most ridiculous takes in sports."})]}),(0,l.jsxs)(o(),{href:"/bar",className:"block w-full bg-amber-600 text-white font-bold p-4 rounded-lg hover:bg-amber-700 transform hover:scale-105 transition duration-200 border-2 border-yellow-600 shadow-md mt-2 flex flex-col space-y-1",children:[(0,l.jsx)("span",{className:"text-3xl",children:"Take a Seat"}),(0,l.jsx)("p",{className:"text-sm text-white",children:"Sit at the Pub Bar, or join a table or booth."})]})]}),e&&(0,l.jsx)("div",{id:"signupModal",className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-8 w-full max-w-sm relative",children:[(0,l.jsx)("button",{id:"closeSignUp",className:"absolute top-2 right-2 text-gray-500 hover:text-red-500 text-2xl font-bold",onClick:y,children:"\xd7"}),(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-900 text-center",children:"Sign Up / Login"}),(0,l.jsx)("div",{className:"flex flex-col gap-2 mb-2",children:(0,l.jsxs)("button",{id:"googleSignInBtn",type:"button",className:"w-full bg-blue-600 text-white py-2 rounded-lg font-bold hover:bg-blue-700 flex items-center justify-center gap-2",onClick:N,children:[(0,l.jsx)("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",className:"w-5 h-5",alt:"Google logo"})," ","Sign in with Google"]})}),(0,l.jsx)("div",{className:"text-center text-sm my-2 text-gray-500",children:"or"}),(0,l.jsxs)("form",{id:"signupForm",className:"space-y-4",onSubmit:v,children:[(0,l.jsx)("input",{type:"email",ref:x,required:!0,placeholder:"Email",className:"w-full border-2 border-amber-700 rounded-lg px-3 py-2"}),(0,l.jsx)("input",{type:"password",ref:h,required:!0,placeholder:"Password",className:"w-full border-2 border-amber-700 rounded-lg px-3 py-2"}),(0,l.jsx)("input",{type:"text",ref:p,required:!0,placeholder:"Choose a username",className:"w-full border-2 border-amber-700 rounded-lg px-3 py-2"}),(0,l.jsx)("button",{type:"submit",className:"w-full bg-amber-600 text-white py-2 rounded-lg font-bold hover:bg-amber-700",children:"Create Account"})]}),(0,l.jsx)("div",{className:"text-center text-sm my-2 text-gray-500",children:"or"}),(0,l.jsxs)("form",{id:"loginForm",className:"space-y-4",onSubmit:j,children:[(0,l.jsx)("input",{type:"email",ref:g,required:!0,placeholder:"Email",className:"w-full border-2 border-amber-700 rounded-lg px-3 py-2"}),(0,l.jsx)("input",{type:"password",ref:f,required:!0,placeholder:"Password",className:"w-full border-2 border-amber-700 rounded-lg px-3 py-2"}),(0,l.jsx)("button",{type:"submit",className:"w-full bg-yellow-300 text-amber-900 py-2 rounded-lg font-bold hover:bg-yellow-400",children:"Log In"})]}),(0,l.jsx)("p",{id:"signupMsg",className:c,children:r})]})})]})}}},e=>{e.O(0,[135,210,619,353,441,255,358],()=>e(e.s=6982)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[869],{5717:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(5155),n=a(2115),i=a(2619),d=a.n(i),o=a(2078),l=a(9708),r=a(1328);let b=(0,o.Wp)({apiKey:"AIzaSyBtsOBlh52YZagsLXp9_dcCq4qhkHBSWnU",authDomain:"thepub-sigma.firebaseapp.com",projectId:"thepub-sigma"}),c=(0,l.aU)(b),u=(0,r.xI)(b),m=[{id:"goat",text:"Who's the GOAT?"},{id:"lebron-vs-mj",text:"LeBron vs MJ"},{id:"brady-vs-manning",text:"Brady vs Manning"},{id:"prime-vs-longevity",text:"Prime vs Longevity"}],x=function(){let[e,t]=(0,n.useState)(null),[a,i]=(0,n.useState)([]),[o,b]=(0,n.useState)(""),[x,p]=(0,n.useState)(!1),[g,h]=(0,n.useState)(m[0].id),[f,y]=(0,n.useState)(m[0].text),[v,j]=(0,n.useState)([]),[w,N]=(0,n.useState)({}),[k,S]=(0,n.useState)(""),[T,E]=(0,n.useState)(!0);(0,n.useEffect)(()=>(document.body.style.background="url('https://images.unsplash.com/photo-1447078806655-40579c2520d6?auto=format&fit=crop&w=1350&q=80') no-repeat center center fixed",document.body.style.backgroundSize="cover",document.body.style.minHeight="100vh",document.body.style.fontFamily="'Roboto', sans-serif",()=>{document.body.style.background="",document.body.style.backgroundSize="",document.body.style.minHeight="",document.body.style.fontFamily=""}),[]),(0,n.useEffect)(()=>{(async()=>{let e=[],t=await (0,l.GG)((0,l.rJ)(c,"debateTopics"));if(t.empty){for(let e of m)await (0,l.BN)((0,l.H9)(c,"debateTopics",e.id),{text:e.text});e=[...m]}else for(let a of(e=t.docs.map(e=>({id:e.id,text:e.data().text})),m))e.some(e=>e.id===a.id)||(await (0,l.BN)((0,l.H9)(c,"debateTopics",a.id),{text:a.text}),e.push(a));i(e=m.concat(e.filter(e=>!m.some(t=>t.id===e.id)))),h(e[0].id),y(e[0].text)})()},[]),(0,n.useEffect)(()=>(0,r.hg)(u,t),[]),(0,n.useEffect)(()=>{E(!0);let e=(0,l.P)((0,l.rJ)(c,"debates",g,"messages"),(0,l.My)("timestamp","asc")),t=(0,l.aQ)(e,e=>{let t=[],a={};e.forEach(e=>{let s=e.data();t.push({id:e.id,text:s.text,displayName:s.displayName||"Anonymous",uid:s.uid,timestamp:s.timestamp,time:s.time}),a[s.uid||"Anonymous"]=s.displayName||"Anonymous"}),j(t),N(a),E(!1)});return()=>t()},[g]);let C=async()=>{if(!o.trim())return;let e="custom-"+o.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase(),t=(0,l.H9)(c,"debateTopics",e);(await (0,l.x7)(t)).exists()||(await (0,l.BN)(t,{text:o}),i(t=>[...t,{id:e,text:o}])),h(e),y(o),p(!1),b("")},D=async t=>{if(t.preventDefault(),!k.trim())return;let a={text:k.trim(),displayName:(null==e?void 0:e.displayName)||"Anonymous",uid:null==e?void 0:e.uid,timestamp:(0,l.O5)(),time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};await (0,l.gS)((0,l.rJ)(c,"debates",g,"messages"),a),S("")},A=Object.keys(w),B=A[0],H=A[1];return(0,s.jsxs)("div",{className:"flex flex-col items-center mt-10",children:[(0,s.jsx)("style",{children:"\n        .table-bg {\n          background: rgba(33, 38, 55, 0.96);\n          border-radius: 1.5rem;\n          box-shadow: 0 6px 40px 0 rgba(0,0,0,0.35);\n          border: 6px solid #4c7fb2;\n          backdrop-filter: blur(2px);\n        }\n        .table-top {\n          background: linear-gradient(90deg, #7ab6ec 0%, #c2e7fa 60%, #7ab6ec 100%);\n          border-top-left-radius: 1.5rem;\n          border-top-right-radius: 1.5rem;\n          min-height: 40px;\n        }\n        .debate-seat {\n          width: 48px; height: 48px; background: #4c7fb2; border-radius: 50%; margin: 6px;\n          border: 2px solid #7ab6ec;\n          box-shadow: 0 2px 8px 0 rgba(0,0,0,0.25);\n          display: inline-block;\n          object-fit: cover;\n        }\n        .debate-topic {\n          background: #eaf6ff;\n          border: 2px solid #4c7fb2;\n          border-radius: 12px;\n          margin-bottom: 16px;\n          font-weight: bold;\n          color: #22517a;\n          padding: 8px 18px;\n          text-align: center;\n        }\n        .debate-message-bubble {\n          background: #d1e7f9;\n          border-radius: 10px;\n          padding: 10px 14px;\n          margin-bottom: 8px;\n          color: #13304a;\n          font-size: 1rem;\n          max-width: 80%;\n          box-shadow: 0 1px 5px rgba(44,64,98,0.08);\n        }\n        .debate-message-bubble.mine {\n          background: #4c7fb2;\n          color: #fff;\n          margin-left: auto;\n          text-align: right;\n        }\n        .debate-message-meta {\n          font-size: 0.85em;\n          color: #5e7e9d;\n          margin-bottom: 2px;\n          font-family: 'Montserrat', sans-serif;\n        }\n        #debateMessages::-webkit-scrollbar {\n          width: 7px;\n          background: #23263a;\n        }\n        #debateMessages::-webkit-scrollbar-thumb {\n          background: #4c7fb2;\n          border-radius: 6px;\n        }\n      "}),(0,s.jsxs)("div",{className:"table-bg w-full max-w-2xl mx-auto",children:[(0,s.jsxs)("div",{className:"table-top flex items-center justify-between px-6 py-2",children:[(0,s.jsx)("h1",{className:"text-2xl font-montserrat font-bold text-blue-900 drop-shadow",children:"\uD83D\uDDE3️ 1-on-1 Debate Table"}),(0,s.jsx)("div",{children:(0,s.jsx)(d(),{href:"/",className:"bg-blue-700 hover:bg-blue-900 text-white font-bold py-1 px-3 rounded-lg shadow text-base transition duration-150 border-2 border-blue-300",children:"Home"})})]}),!e&&(0,s.jsx)("div",{className:"p-6 flex flex-col items-center space-y-3",children:(0,s.jsx)("button",{className:"bg-blue-700 hover:bg-blue-800 text-white font-bold py-2 px-4 rounded-lg shadow-lg text-lg",onClick:()=>{(0,r.df)(u,new r.HF)},children:"Sign in with Google"})}),e&&(0,s.jsxs)("div",{className:"flex flex-col h-[65vh] px-6 pb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center mb-2",children:[(0,s.jsx)("label",{className:"text-blue-300 font-bold text-lg mb-1",htmlFor:"debateSelect",children:"Debate Table"}),(0,s.jsxs)("select",{id:"debateSelect",className:"bg-blue-100 border-2 border-blue-700 rounded p-2 mb-2 w-48 text-center font-bold",value:x?"custom":g,onChange:e=>{let t=e.target.value;if("custom"===t)p(!0),y(o||"Enter your own debate topic!");else{var s;p(!1);let e=(null==(s=a.find(e=>e.id===t))?void 0:s.text)||"Debate topic";h(t),y(e)}},children:[a.map(e=>(0,s.jsx)("option",{value:e.id,children:e.text},e.id)),(0,s.jsx)("option",{value:"custom",children:"Custom Topic..."})]}),(0,s.jsx)("div",{className:"flex w-full items-center gap-2",children:x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{id:"customTopicInput",type:"text",placeholder:"Enter custom topic...",className:"bg-blue-50 border-2 border-blue-700 rounded p-2 mb-2 w-64 text-center font-bold",maxLength:100,value:o,onChange:e=>{b(e.target.value),y(e.target.value||"Enter your own debate topic!")},autoFocus:!0}),(0,s.jsx)("button",{id:"addCustomTopicBtn",className:"bg-blue-700 hover:bg-blue-800 text-white font-bold py-1 px-3 rounded-lg mb-2",onClick:C,children:"Add Topic"})]})})]}),(0,s.jsx)("div",{id:"topicDisplay",className:"debate-topic",children:f}),(0,s.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-center mb-2",children:[(0,s.jsx)("div",{id:"seat1",children:B?(0,s.jsx)("img",{src:"https://robohash.org/".concat(B,"?set=set5&size=48x48"),title:w[B],className:"debate-seat",alt:w[B]}):(0,s.jsx)("div",{className:"debate-seat bg-gray-200 flex items-center justify-center text-blue-700 font-bold",children:"?"})}),(0,s.jsx)("div",{id:"seat2",children:H?(0,s.jsx)("img",{src:"https://robohash.org/".concat(H,"?set=set5&size=48x48"),title:w[H],className:"debate-seat",alt:w[H]}):(0,s.jsx)("div",{className:"debate-seat bg-gray-200 flex items-center justify-center text-blue-700 font-bold",children:"?"})})]}),(0,s.jsxs)("div",{id:"debateMessages",className:"flex-1 overflow-y-auto bg-blue-50/80 rounded-lg p-4 mb-2 border-2 border-blue-600 shadow-inner",style:{minHeight:"220px"},children:[T&&(0,s.jsx)("div",{className:"text-center text-blue-400 italic my-2",children:"Loading arguments..."}),v.map((t,a)=>{let n=e&&t.uid===e.uid;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"debate-message-meta ".concat(n?"text-blue-700 text-right":"text-blue-900 text-left"),children:[t.displayName||"Anonymous"," ",(0,s.jsx)("span",{className:"text-blue-400",children:t.time||""})]}),(0,s.jsx)("div",{className:"debate-message-bubble".concat(n?" mine":""),children:t.text})]},t.id||a)})]}),(0,s.jsxs)("form",{id:"debateMessageForm",className:"flex items-center gap-2",onSubmit:D,children:[(0,s.jsx)("input",{id:"debateMessageInput",type:"text",required:!0,maxLength:240,className:"flex-1 bg-white border-2 border-blue-600 rounded-lg p-2 focus:outline-none focus:ring-blue-800",placeholder:"Type your argument...",value:k,onChange:e=>S(e.target.value)}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-700 hover:bg-blue-900 text-white font-bold py-2 px-4 rounded-lg shadow",children:"Send"})]})]})]}),(0,s.jsx)("p",{className:"text-blue-200 mt-2 text-sm",children:"The Pub — Grab a seat and debate 1-on-1!"})]})}},7517:(e,t,a)=>{Promise.resolve().then(a.bind(a,5717))}},e=>{e.O(0,[135,210,619,353,441,255,358],()=>e(e.s=7517)),_N_E=e.O()}]);